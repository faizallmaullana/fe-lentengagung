import{_ as We,r as w,p as Y,C as $e,D as K,s as _e,E as Ee,c as d,a,G as A,d as v,g as P,t as f,k as q,F as R,y as W,e as s,f as g,B as h,H as F,S as i,m as Ge,o as u,n as re}from"./index-SbiDxUwW.js";const ze={class:"max-w-4xl mx-auto pb-20"},Je={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center"},He={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center"},Ye={key:2},qe={class:"mb-8"},Ze={class:"flex items-center gap-3 mb-6"},Qe={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium flex items-center gap-2"},Xe={class:"flex items-center justify-between relative"},ea={key:0},aa={key:1},ta={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-8"},la={key:0,class:"space-y-6 animate-fade-in"},ra={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},na=["disabled"],oa={key:0,class:"mt-4 p-3 bg-blue-100 rounded-lg border border-blue-300"},sa={key:0,class:"text-center"},ia=["src"],da={key:1,class:"text-center py-4"},ua={class:"flex justify-between items-center mt-3"},ga={key:0,class:"text-xs text-blue-600 animate-pulse font-medium flex items-center gap-2"},ma={class:"bg-white border border-gray-200 rounded-xl p-6"},pa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ba={class:"bg-white border border-gray-200 rounded-xl p-6"},ca={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},fa={class:"bg-white border border-gray-200 rounded-xl p-6"},ka={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},xa={key:1,class:"space-y-6 animate-fade-in"},va={class:"bg-white border border-gray-200 rounded-xl p-6"},ya={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},wa=["disabled"],ha={key:0,class:"mt-4 p-3 bg-blue-100 rounded-lg border border-blue-300"},Ua={key:0,class:"text-center"},Pa=["src"],Fa={key:1,class:"text-center py-4"},La={class:"flex justify-between items-center mt-3"},ja={key:0,class:"text-xs text-blue-600 animate-pulse font-medium flex items-center gap-2"},Ka={class:"text-xs text-gray-600 mt-2"},Aa={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6"},Ca={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Na={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Va={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},Ta={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},Ma={class:"bg-white border border-gray-200 rounded-xl p-6"},Sa=["onClick"],Ba={class:"text-sm font-semibold text-gray-700 mb-4 uppercase tracking-wide"},Da={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},Oa={class:"block text-sm font-medium text-gray-700 mb-2"},Ia=["onChange","disabled"],Ra={key:0,class:"mt-4 p-3 bg-purple-100 rounded-lg border border-purple-300"},Wa={class:"text-sm font-medium text-purple-800 mb-2"},$a={key:0,class:"text-center"},_a=["src"],Ea={key:1,class:"text-center py-4"},Ga={class:"flex justify-between items-center mt-3"},za={key:0,class:"text-xs text-blue-600 animate-pulse font-medium flex items-center gap-2"},Ja={class:"text-xs text-gray-600 mt-2"},Ha={class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Ya={class:"block text-sm font-medium text-gray-700 mb-2"},qa=["onChange","disabled"],Za={class:"mt-2"},Qa={key:0,class:"flex items-center gap-2 text-xs text-blue-600"},Xa={class:"flex-1 bg-gray-200 rounded-full h-1 ml-2"},et={key:1,class:"space-y-3"},at={class:"flex items-center gap-2 text-xs text-green-600"},tt={key:0,class:"p-3 bg-blue-100 rounded-lg border border-blue-300"},lt={class:"text-sm font-medium text-blue-800 mb-2"},rt={key:0,class:"text-center"},nt=["src"],ot={key:1,class:"text-center py-4"},st={key:2,class:"flex items-center gap-2 text-xs text-red-600"},it={key:3,class:"text-xs text-gray-500"},dt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},ut=["onUpdate:modelValue"],gt=["onUpdate:modelValue"],mt=["onUpdate:modelValue"],pt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4"},bt=["onUpdate:modelValue"],ct=["onUpdate:modelValue"],ft={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4"},kt=["onUpdate:modelValue"],xt=["onUpdate:modelValue"],vt=["onUpdate:modelValue"],yt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4"},wt=["onUpdate:modelValue"],ht=["onUpdate:modelValue"],Ut=["onUpdate:modelValue"],Pt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ft={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Lt=["onUpdate:modelValue"],jt=["onUpdate:modelValue"],Kt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},At=["onUpdate:modelValue"],Ct=["onUpdate:modelValue"],Nt=["onUpdate:modelValue"],Vt=["onUpdate:modelValue"],Tt={key:2,class:"space-y-6 animate-fade-in"},Mt=["onClick"],St={class:"text-sm font-semibold text-gray-700 mb-4 uppercase tracking-wide"},Bt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},Dt={class:"block text-sm font-medium text-gray-700 mb-2"},Ot=["onChange","disabled"],It={class:"flex justify-between items-center mt-3"},Rt={key:0,class:"text-xs text-blue-600 animate-pulse font-medium flex items-center gap-2"},Wt={class:"text-xs text-gray-600 mt-2"},$t={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},_t=["onUpdate:modelValue"],Et=["onUpdate:modelValue"],Gt=["onUpdate:modelValue"],zt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4"},Jt=["onUpdate:modelValue"],Ht=["onUpdate:modelValue"],Yt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4"},qt=["onUpdate:modelValue"],Zt=["onUpdate:modelValue"],Qt=["onUpdate:modelValue"],Xt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},el=["onUpdate:modelValue"],al=["onUpdate:modelValue"],tl=["onUpdate:modelValue"],ll=["onUpdate:modelValue"],rl={key:3,class:"space-y-6 animate-fade-in"},nl={class:"bg-gray-50 border border-gray-200 rounded-xl p-4"},ol={key:0,class:"text-center py-8 text-gray-500"},sl={key:1,class:"space-y-4"},il={class:"flex items-center gap-3 mb-3"},dl={class:"flex-1"},ul=["onUpdate:modelValue"],gl=["onClick"],ml=["onChange","disabled"],pl={class:"mt-2 space-y-1"},bl={key:0,class:"flex items-center gap-2 text-xs text-blue-600"},cl={class:"flex-1 bg-gray-200 rounded-full h-1"},fl={key:1,class:"space-y-2"},kl={class:"flex items-center gap-2 text-xs text-green-600"},xl={key:0,class:"p-3 bg-orange-100 rounded-lg border border-orange-300"},vl={class:"text-sm font-medium text-orange-800 mb-2"},yl={key:0,class:"text-center"},wl=["src","alt"],hl={key:1,class:"text-center py-4"},Ul={key:2,class:"flex items-center gap-2 text-xs text-red-600"},Pl={key:3,class:"text-xs text-gray-500"},Fl={class:"mt-8 flex justify-between items-center pt-6 border-t border-gray-200"},Ll={key:1},$="pengajuan-form-draft-v1",jl={__name:"PengajuanFormView",setup(Kl){const ne=Ge(),_=typeof window<"u",c=w(1),E=["Data Pewaris","Data Ahli Waris","Data Saksi","Upload Dokumen"],oe=Y(()=>(c.value-1)/(E.length-1)*100),V=w(!1),C=w(null),L=w(!1),B=w(null),G=w(!0),x=w(!1),T=w(0);w(null);const Z=w(null),Q=w(null),X=w(null),M=()=>({nik:"",nama:"",tanggalMeninggal:"",alamat:"",agama:"",golonganDarah:"",jenisKelamin:"",kecamatan:"",kelurahanAtauDesa:"",kewarganegaraan:"",pekerjaan:"",rt:"",rw:"",statusPerkawinan:"",tanggalLahir:"",tempatLahir:""}),se=l=>{const e=M();Object.keys(e).forEach(t=>{l[t]=e[t]})},S=()=>({...M(),hubungan:"Pasangan",ktpFile:null}),j=()=>({...M(),hubungan:"Anak Kandung",ktpFile:null,aktaKelahiranFile:null,aktaUploaded:!1,aktaUploading:!1,aktaUploadProgress:0}),U=()=>({...M(),hubungan:"Saksi",ktpFile:null}),o=$e({pewaris:M(),ahliWarisList:[S(),j()],saksiList:[U(),U()],dokumenPendukung:[]}),m=Y(()=>o.ahliWarisList[0]),z=Y(()=>o.ahliWarisList.slice(1)),ie=()=>({pewaris:{...o.pewaris},ahliWarisList:o.ahliWarisList.map(l=>{const{ktpFile:e,...t}=l;return{...t,ktpFile:null}}),saksiList:o.saksiList.map(l=>{const{ktpFile:e,...t}=l;return{...t,ktpFile:null}}),dokumenPendukung:o.dokumenPendukung.map(l=>{const{file:e,...t}=l;return{...t,file:null}}),currentStep:c.value}),ee=()=>{if(_)try{localStorage.setItem($,JSON.stringify(ie()))}catch(l){console.warn("Gagal menyimpan draft pengajuan",l)}},de=()=>{_&&localStorage.removeItem($)},ue=l=>{try{if(console.log("Loading edit data:",l),L.value=!0,B.value=l.formId||l.id_form,l.pewaris&&typeof l.pewaris=="object"&&(Object.keys(o.pewaris).forEach(t=>{t!=="ktpFile"&&(o.pewaris[t]="")}),Object.assign(o.pewaris,{...l.pewaris,ktpFile:null}),l.pewaris.ktpFileName&&(o.ktpFileName=l.pewaris.ktpFileName)),Array.isArray(l.ahliWarisList)&&l.ahliWarisList.length>0){const t=l.ahliWarisList.map((r,n)=>{const b={...n===0?S():j(),...r,ktpFile:null,aktaKelahiranFile:null,aktaUploaded:r.aktaUploaded||!1,aktaUploading:r.aktaUploading||!1,aktaUploadProgress:r.aktaUploadProgress||0};return r.ktpFileName&&(b.ktpFileName=r.ktpFileName),r.aktaFileName&&(b.aktaFileName=r.aktaFileName),r.hubungan&&(b.hubungan=r.hubungan),b});for(;t.length<2;)t.push(j());o.ahliWarisList.splice(0,o.ahliWarisList.length,...t)}else o.ahliWarisList.splice(0,o.ahliWarisList.length,S(),j());if(Array.isArray(l.saksiList)&&l.saksiList.length>0){const t=l.saksiList.map(r=>{const p={...U(),...r,ktpFile:null,aktaUploaded:r.aktaUploaded||!1,aktaUploading:r.aktaUploading||!1,aktaUploadProgress:r.aktaUploadProgress||0};return r.ktpFileName&&(p.ktpFileName=r.ktpFileName),r.aktaFileName&&(p.aktaFileName=r.aktaFileName),p});for(;t.length<2;)t.push(U());o.saksiList.splice(0,o.saksiList.length,...t)}else o.saksiList.splice(0,o.saksiList.length,U(),U());if(Array.isArray(l.dokumenPendukung)&&l.dokumenPendukung.length>0){const t=l.dokumenPendukung.map(r=>({nama:r.nama||"",fileName:r.fileName||"",file:null,uploaded:!!r.uploaded||!!r.fileName}));o.dokumenPendukung.splice(0,o.dokumenPendukung.length,...t)}else o.dokumenPendukung.splice(0,o.dokumenPendukung.length);const e=B.value;i.fire({icon:"success",title:"Data Dimuat",text:`Form ID ${e} berhasil dimuat untuk edit`,timer:2e3,showConfirmButton:!1}),console.log("Edit data loaded successfully for form ID:",e),console.log("Loaded form data:",{pewaris:o.pewaris,ahliWarisList:o.ahliWarisList,saksiList:o.saksiList,dokumenPendukung:o.dokumenPendukung})}catch(e){console.error("Failed to load edit data:",e),i.fire({icon:"error",title:"Gagal Memuat Data Edit",text:"Terjadi kesalahan saat memuat data untuk edit. Halaman akan dimuat normal."})}},ge=()=>{if(!_)return;const l=localStorage.getItem("pengajuan-form-edit-data");if(l)try{const t=JSON.parse(l);ue(t),localStorage.removeItem("pengajuan-form-edit-data");return}catch(t){console.warn("Failed to load edit data",t),localStorage.removeItem("pengajuan-form-edit-data")}const e=localStorage.getItem($);if(e)try{const t=JSON.parse(e);if(t.pewaris&&Object.assign(o.pewaris,t.pewaris),Array.isArray(t.ahliWarisList)&&t.ahliWarisList.length>0){const r=t.ahliWarisList.map((n,p)=>{const b=p===0?S():j();return{...b,...n,ktpFile:null,hubungan:b.hubungan}});r.length<2&&r.push(j()),o.ahliWarisList.splice(0,o.ahliWarisList.length,...r)}if(Array.isArray(t.saksiList)&&t.saksiList.length>0){const r=t.saksiList.map(n=>({...U(),...n,ktpFile:null}));r.length<2&&r.push(U()),o.saksiList.splice(0,o.saksiList.length,...r)}Array.isArray(t.dokumenPendukung)&&t.dokumenPendukung.length>0&&o.dokumenPendukung.splice(0,o.dokumenPendukung.length,...t.dokumenPendukung.map(r=>({...r,file:null,uploaded:!!r.fileName}))),typeof t.currentStep=="number"&&t.currentStep>=1&&t.currentStep<=E.length&&(c.value=t.currentStep)}catch(t){console.warn("Gagal memuat draft pengajuan",t),localStorage.removeItem($)}};K(o,()=>ee(),{deep:!0}),K(c,()=>ee());const ae=()=>{se(o.pewaris),o.ahliWarisList.splice(0,o.ahliWarisList.length,S(),j()),o.saksiList.splice(0,o.saksiList.length,U(),U()),o.dokumenPendukung=[],Z.value=null,Q.value=null,X.value=null},J=(l,e)=>{if(!l)return null;for(const t of e){if(Object.prototype.hasOwnProperty.call(l,t))return l[t];const r=l[t.toUpperCase()];if(r)return r}return null},H=l=>{if(l==null)return null;let e=String(l);return e=e.trim(),e=e.replace(/^[:\s]+/,""),e=e.replace(/[\s]+$/,""),e},me=l=>{if(!l)return null;let e=J(l,["nik","no_ktp","nomor_ktp","noktp","no"]);if(e&&(e=H(e).replace(/[^0-9]/g,"")),!e){const p=Object.values(l).join(" ").replace(/[^0-9]/g,"").match(/\d{16}/);p&&(e=p[0])}if(!e)return null;const t=String(e);return t.length>16?t.slice(0,16):t},pe=l=>{const e=J(l,["nama","name","full_name"]);if(!e)return null;let t=H(e);return t=t.replace(/^[^a-zA-Z]*/,""),t=t.replace(/[^a-zA-Z\s\-']/g,""),t.trim()||null},be=(l,e,t)=>{Object.entries(t).forEach(([r,n])=>{const p=J(e,n);p&&(l[r]=H(p))})},ce={alamat:["alamat","address"],agama:["agama"],golonganDarah:["golongan_darah","golonganDarah"],jenisKelamin:["jenis_kelamin","jenisKelamin"],kecamatan:["kecamatan"],kelurahanAtauDesa:["kelurahan_atau_desa","kelurahanAtauDesa"],kewarganegaraan:["kewarganegaraan"],pekerjaan:["pekerjaan"],rt:["rt"],rw:["rw"],statusPerkawinan:["status_perkawinan","statusPerkawinan"],tanggalLahir:["tanggal_lahir","tanggalLahir"],tempatLahir:["tempat_lahir","tempatLahir"]},D=l=>l?l.file_name&&l.ocr?{fileName:l.file_name,data:l.ocr}:{data:l,fileName:null}:{data:null,fileName:null},O=(l,e)=>{if(!l||!e)return;const t=me(e);t&&(l.nik=t);const r=pe(e);r&&(l.nama=r),be(l,e,ce)},te=l=>{if(!l)return;const{data:e,fileName:t}=D(l);if(!e){i.fire({icon:"info",title:"OCR Tidak Tersedia",text:"File tersimpan, silakan isi manual."});return}O(o.pewaris,e),Z.value={file_name:t||null,nik:o.pewaris.nik||null,nama:o.pewaris.nama||null,alamat:o.pewaris.alamat||null,raw:e}},fe=(l,e)=>{if(!l)return;const t=o.ahliWarisList[e];if(!t)return;const{data:r}=D(l);r&&O(t,r)},ke=(l,{showAlert:e=!0,copyPayload:t=!0}={})=>{if(!l)return;const r=l.ocr?l:{file_name:l.file_name,ocr:l};if(ae(),Q.value=r,X.value=r,te(r),t)try{const n=JSON.stringify(r);navigator&&navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(n)}catch(n){console.warn("Clipboard copy failed",n)}e&&i.fire({icon:"success",title:"Contoh Diisi",text:"Data pewaris dan payload JSON telah disiapkan dan disalin (jika didukung)."})},xe=l=>{if(!l)return null;if(typeof l=="string")try{return JSON.parse(l)}catch(e){return console.warn("Tidak dapat mengurai payload OCR string",e),null}return typeof l=="object"?l:null},I=l=>{if(!l)return null;const e=xe(l.response??l);if(!e)return null;const t=r=>{if(!r)return null;if(r.ocr||r.file_name)return r;if(r.data&&typeof r.data=="object"){const n=t(r.data);if(n)return n}if(r.response&&typeof r.response=="object"){const n=t(r.response);if(n)return n}return r};return t(e)},ve=()=>{ke({file_name:"ktp_693c6342f6af_1768169313_Scan_KTP.JPG",ocr:{agama:": ISLAM",alamat:"1 JL KECAPI V",golongan_darah:"-",jenis_kelamin:"PEREMPUAN",kecamatan:"JAGAKARSA",kelurahan_atau_desa:"JAGAKARSA",kewarganegaraan:"WNI a 1 221 1",nama:"1 DEBBY ANGGRAINI",nik:"31?4096112100001",pekerjaan:": KARYAWAN SWASTA JAKARTA SELATAN",rt:"1006",rw:"005",status_perkawinan:" BELUM KAWIN",tanggal_lahir:"21-12-1990",tempat_lahir:" JAKARTA, "}})},y=w({}),N=async(l,e,t)=>{try{const n=(await F.get(`/upload/${l}/${e}`,{responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data,p=URL.createObjectURL(n);y.value[t]=p}catch(r){console.error("Failed to fetch authenticated image:",r),y.value[t]=null}},ye=async l=>{const e=l.target.files[0];if(e){x.value=!0,T.value=0;try{i.fire({title:"Mengunggah dan memproses OCR...",didOpen:()=>i.showLoading()});const t=new FormData;t.append("file",e);const r=await F.post("/upload/ocr/ktp",t,{headers:{"Content-Type":"multipart/form-data"}}),n=I(r?.data);r?.data?.file_name&&(o.ktpFileName=r.data.file_name),n?(te(n),i.fire({icon:"success",title:"OCR Sukses",text:"Data KTP terisi otomatis. Mohon periksa kembali."})):i.fire({icon:"info",title:"OCR Tidak Tersedia",text:"File tersimpan, silakan isi data manual."})}catch(t){console.error("OCR upload failed",t),i.fire({icon:"error",title:"Gagal Mengunggah",text:"Terjadi kesalahan saat mengunggah atau memproses OCR."})}finally{try{i.close()}catch{}x.value=!1}}},we=async l=>{const e=l.target.files[0];if(e){if(e.size>5*1024*1024){i.fire("File Terlalu Besar","Maksimal 5MB","warning"),l.target.value="";return}x.value=!0,T.value=0;try{i.fire({title:"Mengunggah dan memproses OCR...",didOpen:()=>i.showLoading()});const t=new FormData;t.append("file",e);const r=await F.post("/upload/ocr/ktp",t,{headers:{"Content-Type":"multipart/form-data"}}),n=I(r?.data),p=m.value;if(!p)return;if(p.ktpFile=e,r?.data?.file_name&&(p.ktpFileName=r.data.file_name),n){const{data:b}=D(n);b?(O(p,b),i.fire({icon:"success",title:"OCR Sukses",text:"Data pasangan terisi otomatis."})):i.fire({icon:"info",title:"OCR Tidak Tersedia",text:"File tersimpan, silakan isi manual."})}else i.fire({icon:"info",title:"OCR Tidak Tersedia",text:"File tersimpan, silakan isi manual."})}catch(t){console.error("OCR upload failed for pasangan",t),i.fire({icon:"error",title:"Gagal Mengunggah",text:"Terjadi kesalahan saat memproses OCR."});const r=m.value;r&&(r.ktpFile=e)}finally{try{i.close()}catch{}x.value=!1,l.target.value=""}}},he=async(l,e)=>{const t=l.target.files[0];if(!t)return;const r=e+1,n=o.ahliWarisList[r];if(n){if(t.size>5*1024*1024){i.fire("File Terlalu Besar","Maksimal 5MB","warning"),l.target.value="";return}x.value=!0,T.value=0;try{i.fire({title:"Mengunggah dan memproses OCR...",didOpen:()=>i.showLoading()});const p=new FormData;p.append("file",t);const b=await F.post("/upload/ocr/ktp",p,{headers:{"Content-Type":"multipart/form-data"}}),k=I(b?.data);n.ktpFile=t,b?.data?.file_name&&(n.ktpFileName=b.data.file_name),k?(fe(k,r),i.fire({icon:"success",title:"OCR Sukses",text:"Nama dan NIK ahli waris terisi otomatis."})):i.fire({icon:"info",title:"OCR Tidak Tersedia",text:"File tersimpan, silakan isi data manual."})}catch(p){console.error("OCR upload failed for ahli",p),i.fire({icon:"error",title:"Gagal Mengunggah",text:"Terjadi kesalahan saat mengunggah atau memproses OCR."}),n.ktpFile=t}finally{try{i.close()}catch{}x.value=!1,l.target.value=""}}},Ue=()=>{o.ahliWarisList.push(j())},Pe=l=>{if(o.ahliWarisList.length<=2){i.fire("Gagal","Minimal 1 Anak sebagai ahli waris.","warning");return}o.ahliWarisList.splice(l+1,1)},Fe=()=>{o.saksiList.push(U())},Le=l=>{o.saksiList.length>1?o.saksiList.splice(l,1):i.fire("Gagal","Minimal 1 Saksi.","warning")},je=()=>{o.dokumenPendukung.push({nama:"",file:null,fileName:null,uploaded:!1,uploading:!1,uploadProgress:0,required:!1})},Ke=async(l,e)=>{const t=l.target.files[0];if(!t)return;const r=o.ahliWarisList[e+1];if(r){if(t.size>5*1024*1024){i.fire("File Terlalu Besar","Maksimal 5MB","warning"),l.target.value="";return}r.aktaUploading=!0,r.aktaUploadProgress=0;try{i.fire({title:"Mengunggah akta kelahiran...",text:"Mohon tunggu, file sedang diupload",didOpen:()=>i.showLoading(),allowEscapeKey:!1,allowOutsideClick:!1});const n=new FormData;n.append("file",t);const p=await F.post("/upload/akta",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:b=>{const k=Math.round(b.loaded*100/b.total);r.aktaUploadProgress=k}});r.aktaKelahiranFile=t,r.aktaFileName=p.data.file_name,r.aktaUploaded=!0,i.fire({icon:"success",title:"Upload Berhasil",text:"Akta kelahiran berhasil diunggah",timer:2e3,showConfirmButton:!1})}catch(n){console.error("Akta upload failed",n),i.fire({icon:"error",title:"Gagal Upload",text:"Terjadi kesalahan saat mengunggah akta kelahiran"}),r.aktaKelahiranFile=t,r.aktaUploaded=!1}finally{r.aktaUploading=!1,l.target.value="";try{i.close()}catch{}}}},Ae=async(l,e)=>{const t=l.target.files[0];if(!t)return;if(t.size>5*1024*1024){i.fire("File Terlalu Besar","Maksimal 5MB","warning"),l.target.value="";return}const r=o.dokumenPendukung[e];if(r){r.uploading=!0,r.uploadProgress=0;try{i.fire({title:"Mengunggah dokumen...",text:"Mohon tunggu, file sedang diupload",didOpen:()=>i.showLoading(),allowEscapeKey:!1,allowOutsideClick:!1});const n=new FormData;n.append("file",t);const p=await F.post("/upload/documents",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:b=>{const k=Math.round(b.loaded*100/b.total);r.uploadProgress=k}});r.file=t,r.fileName=p.data.file_name,r.uploaded=!0,i.fire({icon:"success",title:"Upload Berhasil",text:"Dokumen berhasil diunggah",timer:2e3,showConfirmButton:!1})}catch(n){console.error("Document upload failed",n),i.fire({icon:"error",title:"Gagal Upload",text:"Terjadi kesalahan saat mengunggah dokumen"}),r.file=t,r.uploaded=!1}finally{r.uploading=!1,l.target.value=""}}},Ce=async(l,e)=>{const t=l.target.files[0];if(!t)return;const r=o.saksiList[e];if(r){if(t.size>5*1024*1024){i.fire("File Terlalu Besar","Maksimal 5MB","warning"),l.target.value="";return}x.value=!0,T.value=0;try{i.fire({title:"Mengunggah dan memproses OCR...",didOpen:()=>i.showLoading()});const n=new FormData;n.append("file",t);const p=await F.post("/upload/ocr/ktp",n,{headers:{"Content-Type":"multipart/form-data"}}),b=I(p?.data);if(r.ktpFile=t,b){const{data:k}=D(b);k?(O(r,k),i.fire({icon:"success",title:"OCR Sukses",text:"Data saksi terisi otomatis."})):i.fire({icon:"info",title:"OCR Tidak Tersedia",text:"File tersimpan, silakan isi manual."})}else i.fire({icon:"info",title:"OCR Tidak Tersedia",text:"File tersimpan, silakan isi manual."})}catch(n){console.error("OCR upload failed for saksi",n),i.fire({icon:"error",title:"Gagal Mengunggah",text:"Terjadi kesalahan saat memproses OCR."}),r.ktpFile=t}finally{try{i.close()}catch{}x.value=!1,l.target.value=""}}},Ne=()=>{const{nik:l,nama:e,tanggalMeninggal:t,alamat:r}=o.pewaris;return!l||!e||!t||!r?(i.fire("Lengkapi Data","Semua data pewaris wajib diisi.","warning"),!1):String(l).length!==16?(i.fire("Format Salah","NIK harus 16 digit.","warning"),!1):!0},Ve=()=>{const l=z.value;for(let e=0;e<l.length;e++){const t=l[e];if(!t.nama||!t.nik||!t.hubungan)return i.fire("Data Kurang",`Ahli Waris ke-${e+1} belum lengkap.`,"warning"),!1;if(String(t.nik).length!==16)return i.fire("Format Salah",`NIK Ahli Waris ke-${e+1} harus 16 digit.`,"warning"),!1}return!0},Te=()=>{for(let l=0;l<o.saksiList.length;l++){const e=o.saksiList[l];if(!e.nama||!e.nik)return i.fire("Data Kurang",`Saksi ke-${l+1} belum lengkap (nama dan NIK wajib).`,"warning"),!1;if(String(e.nik).length!==16)return i.fire("Format Salah",`NIK Saksi ke-${l+1} harus 16 digit.`,"warning"),!1}return!0},Me=()=>{c.value===1&&!Ne()||c.value===2&&!Ve()||c.value===3&&!Te()||c.value<4&&(c.value++,window.scrollTo({top:0,behavior:"smooth"}))},Se=()=>{c.value>1&&(c.value--,window.scrollTo({top:0,behavior:"smooth"}))},Be=async()=>{const l=L.value?B.value:C.value;if(!l){i.fire("Error","ID form tidak ditemukan. Silakan refresh halaman.","error");return}const e=L.value?"Edit dan Kirim":"Kirim Permohonan",t=L.value?`Pastikan perubahan data sudah benar. Form ID: ${l}`:`Pastikan data sudah benar. Data tidak dapat diubah. Form ID: ${l}`;if((await i.fire({title:`${e}?`,text:t,icon:"question",showCancelButton:!0,confirmButtonColor:"#16a34a",cancelButtonColor:"#d33",confirmButtonText:`Ya, ${e}!`})).isConfirmed)try{i.fire({title:"Mengirim permohonan...",didOpen:()=>i.showLoading()});const n={pewaris:o.pewaris,ahliWarisList:o.ahliWarisList.map(k=>{const{ktpFile:Ie,aktaKelahiranFile:le,...Re}=k;return{...Re,aktaFileName:k.aktaFileName||null}}),saksiList:o.saksiList.map(k=>{const{ktpFile:Ie,...le}=k;return le}),dokumenPendukung:o.dokumenPendukung.map(k=>({nama:k.nama,fileName:k.fileName,uploaded:k.uploaded}))},p=await F.put(`/form/${l}`,n),b=L.value?"Permohonan berhasil diperbarui dan sedang diproses.":"Permohonan berhasil dikirim dan sedang diproses.";await i.fire({icon:"success",title:"Berhasil!",text:b,confirmButtonColor:"#16a34a"}),de(),ne.push("/dashboard")}catch(n){console.error("Submit form failed:",n),i.fire({icon:"error",title:"Gagal Mengirim",text:n.response?.data?.error||"Terjadi kesalahan saat mengirim permohonan. Silakan coba lagi.",confirmButtonColor:"#d33"})}},De=async()=>{if(L.value){V.value=!0;return}try{const l=await F.post("/form/create");console.log("Form created:",l.data),C.value=l.data.id,V.value=!0}catch(l){console.error("Error creating form:",l),i.fire({icon:"error",title:"Gagal Membuat Form",text:l.response?.data?.error||"Terjadi kesalahan saat membuat form. Silakan coba lagi.",confirmButtonColor:"#3085d6"})}},Oe=async()=>{if(L.value){V.value=!0,G.value=!1;return}try{const e=(await F.get("/form/"))?.data;console.log("Existing forms:",e);let t=!1;Array.isArray(e)&&e.length>0?(C.value=e[0].id,t=!0):e&&e.id?(C.value=e.id,t=!0):e&&Array.isArray(e.data)&&e.data.length>0?(C.value=e.data[0].id,t=!0):e&&e.data&&e.data.id&&(C.value=e.data.id,t=!0),t&&(V.value=!0)}catch(l){console.error("Error checking existing forms:",l)}finally{G.value=!1}};return K(()=>o.ktpFileName,l=>{l&&N("ktp",l,`ktp_${l}`)}),K(()=>m.value?.ktpFileName,l=>{l&&N("ktp",l,`ktp_${l}`)}),K(()=>o.ahliWarisList,l=>{l.forEach((e,t)=>{e.ktpFileName&&N("ktp",e.ktpFileName,`ktp_${e.ktpFileName}`),e.aktaFileName&&N("akta",e.aktaFileName,`akta_${e.aktaFileName}`)})},{deep:!0}),K(()=>o.saksiList,l=>{l.forEach((e,t)=>{e.ktpFileName&&N("ktp",e.ktpFileName,`ktp_${e.ktpFileName}`)})},{deep:!0}),K(()=>o.dokumenPendukung,l=>{l.forEach((e,t)=>{e.fileName&&N("documents",e.fileName,`documents_${e.fileName}`)})},{deep:!0}),_e(()=>{ge(),Oe()}),Ee(()=>{Object.values(y.value).forEach(l=>{l&&URL.revokeObjectURL(l)})}),(l,e)=>(u(),d("div",ze,[G.value?(u(),d("div",Je,[...e[32]||(e[32]=[a("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"},null,-1),a("p",{class:"text-gray-600"},"Memeriksa status pengajuan...",-1)])])):V.value?(u(),d("div",Ye,[a("div",qe,[a("div",Ze,[e[35]||(e[35]=a("h1",{class:"text-2xl font-bold text-gray-800"},"Formulir Pengajuan Waris",-1)),L.value?(u(),d("div",Qe,[e[34]||(e[34]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),P(" Mode Edit - ID: "+f(B.value),1)])):v("",!0)]),a("div",Xe,[e[36]||(e[36]=a("div",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 w-full h-1 bg-gray-200 -z-10"},null,-1)),a("div",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 h-1 bg-green-600 -z-10 transition-all duration-500 ease-out",style:q({width:`${oe.value}%`})},null,4),(u(),d(R,null,W(E,(t,r)=>a("div",{key:r,class:"flex flex-col items-center bg-gray-50 px-2 z-10"},[a("div",{class:re(["w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm transition-all duration-500 border-2",c.value>r+1?"bg-green-600 text-white border-green-600 scale-110":c.value===r+1?"bg-white text-green-600 border-green-600 scale-110 shadow-lg":"bg-white text-gray-300 border-gray-300"])},[c.value>r+1?(u(),d("span",ea,"âœ“")):(u(),d("span",aa,f(r+1),1))],2),a("span",{class:re(["text-xs font-medium mt-2 text-center hidden sm:block w-24",c.value>=r+1?"text-green-700 font-bold":"text-gray-400"])},f(t),3)])),64))])]),a("div",ta,[c.value===1?(u(),d("div",la,[e[65]||(e[65]=a("div",{class:"border-b pb-3 mb-6"},[a("h2",{class:"text-xl font-bold text-gray-800 mb-1"},"Data Pewaris"),a("p",{class:"text-sm text-gray-600"},"Isi data lengkap pewaris yang telah meninggal dunia")],-1)),a("div",ra,[e[41]||(e[41]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Scan KTP Pewaris",-1)),a("input",{type:"file",accept:"image/*",onChange:ye,disabled:x.value,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 cursor-pointer border border-dashed border-blue-300 rounded-lg p-3"},null,40,na),o.ktpFileName?(u(),d("div",oa,[e[38]||(e[38]=a("p",{class:"text-sm font-medium text-blue-800 mb-2"},"ðŸ†” KTP Pewaris yang telah diupload:",-1)),y.value[`ktp_${o.ktpFileName}`]?(u(),d("div",sa,[a("img",{src:y.value[`ktp_${o.ktpFileName}`],alt:"KTP Pewaris",class:"w-full max-w-sm mx-auto rounded-lg shadow-sm border border-gray-200"},null,8,ia)])):(u(),d("div",da,[...e[37]||(e[37]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),a("p",{class:"text-xs text-blue-600 mt-2"},"Memuat gambar...",-1)])]))])):v("",!0),a("div",ua,[e[40]||(e[40]=a("p",{class:"text-xs text-blue-600"},"ðŸ’¡ Tips: Gunakan foto KTP yang terang dan tegak lurus untuk hasil OCR terbaik",-1)),x.value?(u(),d("div",ga,[e[39]||(e[39]=a("div",{class:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"},null,-1)),P(" Memproses OCR... "+f(T.value)+"% ",1)])):v("",!0)]),a("div",{class:"mt-2 flex justify-start gap-4 text-xs"},[a("button",{onClick:ve,type:"button",class:"text-blue-600 hover:text-blue-800 underline transition-colors"},"Isi dari JSON contoh"),a("button",{onClick:ae,type:"button",class:"text-gray-500 hover:text-gray-700 underline transition-colors"},"Reset form")])]),a("div",ma,[e[47]||(e[47]=a("h3",{class:"text-sm font-semibold text-gray-700 mb-4 uppercase tracking-wide"},"Data Utama",-1)),a("div",pa,[a("div",null,[e[42]||(e[42]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"NIK Pewaris *",-1)),s(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.pewaris.nik=t),type:"number",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Masukkan 16 digit NIK"},null,512),[[g,o.pewaris.nik]])]),a("div",null,[e[43]||(e[43]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Lengkap *",-1)),s(a("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.pewaris.nama=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama sesuai KTP"},null,512),[[g,o.pewaris.nama]])]),a("div",null,[e[44]||(e[44]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Meninggal *",-1)),s(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.pewaris.tanggalMeninggal=t),type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"},null,512),[[g,o.pewaris.tanggalMeninggal]]),e[45]||(e[45]=a("p",{class:"text-xs text-orange-600 mt-1"},"* Wajib diisi manual (tidak tersedia di KTP)",-1))]),a("div",null,[e[46]||(e[46]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alamat Terakhir *",-1)),s(a("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.pewaris.alamat=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Alamat lengkap"},null,512),[[g,o.pewaris.alamat]])])])]),a("div",ba,[e[57]||(e[57]=a("h3",{class:"text-sm font-semibold text-gray-700 mb-4 uppercase tracking-wide"},"Data Pribadi",-1)),a("div",ca,[a("div",null,[e[48]||(e[48]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Agama",-1)),s(a("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.pewaris.agama=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Islam, Kristen, dll"},null,512),[[g,o.pewaris.agama]])]),a("div",null,[e[50]||(e[50]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jenis Kelamin",-1)),s(a("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.pewaris.jenisKelamin=t),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[49]||(e[49]=[a("option",{value:""},"Pilih jenis kelamin",-1),a("option",{value:"Laki-laki"},"Laki-laki",-1),a("option",{value:"Perempuan"},"Perempuan",-1)])],512),[[h,o.pewaris.jenisKelamin]])]),a("div",null,[e[52]||(e[52]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Golongan Darah",-1)),s(a("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.pewaris.golonganDarah=t),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[51]||(e[51]=[A('<option value="" data-v-114cae8b>Pilih golongan darah</option><option value="A" data-v-114cae8b>A</option><option value="B" data-v-114cae8b>B</option><option value="AB" data-v-114cae8b>AB</option><option value="O" data-v-114cae8b>O</option>',5)])],512),[[h,o.pewaris.golonganDarah]])]),a("div",null,[e[53]||(e[53]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pekerjaan",-1)),s(a("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.pewaris.pekerjaan=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Profesi/pekerjaan"},null,512),[[g,o.pewaris.pekerjaan]])]),a("div",null,[e[55]||(e[55]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status Perkawinan",-1)),s(a("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.pewaris.statusPerkawinan=t),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[54]||(e[54]=[A('<option value="" data-v-114cae8b>Pilih status</option><option value="Belum Kawin" data-v-114cae8b>Belum Kawin</option><option value="Kawin" data-v-114cae8b>Kawin</option><option value="Cerai Hidup" data-v-114cae8b>Cerai Hidup</option><option value="Cerai Mati" data-v-114cae8b>Cerai Mati</option>',5)])],512),[[h,o.pewaris.statusPerkawinan]])]),a("div",null,[e[56]||(e[56]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kewarganegaraan",-1)),s(a("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>o.pewaris.kewarganegaraan=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"WNI"},null,512),[[g,o.pewaris.kewarganegaraan]])])])]),a("div",fa,[e[64]||(e[64]=a("h3",{class:"text-sm font-semibold text-gray-700 mb-4 uppercase tracking-wide"},"Data Kelahiran & Alamat",-1)),a("div",ka,[a("div",null,[e[58]||(e[58]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tempat Lahir",-1)),s(a("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.pewaris.tempatLahir=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Kota kelahiran"},null,512),[[g,o.pewaris.tempatLahir]])]),a("div",null,[e[59]||(e[59]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Lahir",-1)),s(a("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>o.pewaris.tanggalLahir=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"DD-MM-YYYY"},null,512),[[g,o.pewaris.tanggalLahir]])]),a("div",null,[e[60]||(e[60]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kecamatan",-1)),s(a("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.pewaris.kecamatan=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama kecamatan"},null,512),[[g,o.pewaris.kecamatan]])]),a("div",null,[e[61]||(e[61]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kelurahan/Desa",-1)),s(a("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.pewaris.kelurahanAtauDesa=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama kelurahan/desa"},null,512),[[g,o.pewaris.kelurahanAtauDesa]])]),a("div",null,[e[62]||(e[62]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RT",-1)),s(a("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>o.pewaris.rt=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"000"},null,512),[[g,o.pewaris.rt]])]),a("div",null,[e[63]||(e[63]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RW",-1)),s(a("input",{"onUpdate:modelValue":e[15]||(e[15]=t=>o.pewaris.rw=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"000"},null,512),[[g,o.pewaris.rw]])])])])])):v("",!0),c.value===2?(u(),d("div",xa,[e[126]||(e[126]=a("div",{class:"border-b pb-3 mb-6"},[a("h2",{class:"text-xl font-bold text-gray-800 mb-1"},"Data Ahli Waris"),a("p",{class:"text-sm text-gray-600"},"Isi data pasangan dan anak-anak sebagai ahli waris")],-1)),a("div",va,[e[91]||(e[91]=a("div",{class:"flex justify-between items-center mb-4"},[a("div",null,[a("h3",{class:"text-lg font-semibold text-gray-800 mb-1"},"Data Pasangan"),a("p",{class:"text-sm text-gray-600"},"Isi data pasangan terlebih dahulu sebelum menambahkan anak")]),a("span",{class:"text-xs text-green-600 bg-green-50 px-3 py-1 rounded-full"},"Opsional")],-1)),a("div",ya,[e[70]||(e[70]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Scan KTP Pasangan",-1)),a("input",{onChange:we,accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 cursor-pointer border border-dashed border-blue-300 rounded-lg p-3",type:"file",disabled:x.value},null,40,wa),m.value.ktpFileName?(u(),d("div",ha,[e[67]||(e[67]=a("p",{class:"text-sm font-medium text-blue-800 mb-2"},"ðŸ†” KTP Pasangan yang telah diupload:",-1)),y.value[`ktp_${m.value.ktpFileName}`]?(u(),d("div",Ua,[a("img",{src:y.value[`ktp_${m.value.ktpFileName}`],alt:"KTP Pasangan",class:"w-full max-w-sm mx-auto rounded-lg shadow-sm border border-gray-200"},null,8,Pa)])):(u(),d("div",Fa,[...e[66]||(e[66]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),a("p",{class:"text-xs text-blue-600 mt-2"},"Memuat gambar...",-1)])]))])):v("",!0),a("div",La,[e[69]||(e[69]=a("p",{class:"text-xs text-blue-600"},"ðŸ’¡ Upload untuk mengisi data otomatis (nama, NIK, dll)",-1)),x.value?(u(),d("div",ja,[...e[68]||(e[68]=[a("div",{class:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"},null,-1),P(" Memproses OCR... ",-1)])])):v("",!0)]),a("p",Ka,f(m.value.ktpFile?"File: "+m.value.ktpFile.name:"Belum ada file yang dipilih"),1)]),a("div",Aa,[a("div",null,[e[71]||(e[71]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"NIK Pasangan",-1)),s(a("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>m.value.nik=t),type:"number",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Masukkan 16 digit NIK"},null,512),[[g,m.value.nik]])]),a("div",null,[e[72]||(e[72]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Lengkap",-1)),s(a("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>m.value.nama=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama sesuai KTP"},null,512),[[g,m.value.nama]])]),a("div",null,[e[73]||(e[73]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Meninggal",-1)),s(a("input",{"onUpdate:modelValue":e[18]||(e[18]=t=>m.value.tanggalMeninggal=t),type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"},null,512),[[g,m.value.tanggalMeninggal]]),e[74]||(e[74]=a("p",{class:"text-xs text-gray-500 mt-1"},"Kosongkan jika masih hidup",-1))])]),a("div",Ca,[a("div",null,[e[75]||(e[75]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alamat",-1)),s(a("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>m.value.alamat=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Alamat lengkap"},null,512),[[g,m.value.alamat]])]),a("div",null,[e[76]||(e[76]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Agama",-1)),s(a("input",{"onUpdate:modelValue":e[20]||(e[20]=t=>m.value.agama=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Agama"},null,512),[[g,m.value.agama]])])]),a("div",Na,[a("div",null,[e[78]||(e[78]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jenis Kelamin",-1)),s(a("select",{"onUpdate:modelValue":e[21]||(e[21]=t=>m.value.jenisKelamin=t),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[77]||(e[77]=[a("option",{value:""},"Pilih jenis kelamin",-1),a("option",{value:"Laki-laki"},"Laki-laki",-1),a("option",{value:"Perempuan"},"Perempuan",-1)])],512),[[h,m.value.jenisKelamin]])]),a("div",null,[e[80]||(e[80]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Golongan Darah",-1)),s(a("select",{"onUpdate:modelValue":e[22]||(e[22]=t=>m.value.golonganDarah=t),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[79]||(e[79]=[A('<option value="" data-v-114cae8b>Pilih golongan darah</option><option value="A" data-v-114cae8b>A</option><option value="B" data-v-114cae8b>B</option><option value="AB" data-v-114cae8b>AB</option><option value="O" data-v-114cae8b>O</option>',5)])],512),[[h,m.value.golonganDarah]])]),a("div",null,[e[81]||(e[81]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pekerjaan",-1)),s(a("input",{"onUpdate:modelValue":e[23]||(e[23]=t=>m.value.pekerjaan=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Profesi/pekerjaan"},null,512),[[g,m.value.pekerjaan]])])]),a("div",Va,[a("div",null,[e[82]||(e[82]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kecamatan",-1)),s(a("input",{"onUpdate:modelValue":e[24]||(e[24]=t=>m.value.kecamatan=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama kecamatan"},null,512),[[g,m.value.kecamatan]])]),a("div",null,[e[83]||(e[83]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kelurahan/Desa",-1)),s(a("input",{"onUpdate:modelValue":e[25]||(e[25]=t=>m.value.kelurahanAtauDesa=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Kelurahan/desa"},null,512),[[g,m.value.kelurahanAtauDesa]])]),a("div",null,[e[84]||(e[84]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kewarganegaraan",-1)),s(a("input",{"onUpdate:modelValue":e[26]||(e[26]=t=>m.value.kewarganegaraan=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"WNI"},null,512),[[g,m.value.kewarganegaraan]])]),a("div",null,[e[86]||(e[86]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status Perkawinan",-1)),s(a("select",{"onUpdate:modelValue":e[27]||(e[27]=t=>m.value.statusPerkawinan=t),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[85]||(e[85]=[A('<option value="" data-v-114cae8b>Pilih status</option><option value="Belum Kawin" data-v-114cae8b>Belum Kawin</option><option value="Kawin" data-v-114cae8b>Kawin</option><option value="Cerai Hidup" data-v-114cae8b>Cerai Hidup</option><option value="Cerai Mati" data-v-114cae8b>Cerai Mati</option>',5)])],512),[[h,m.value.statusPerkawinan]])])]),a("div",Ta,[a("div",null,[e[87]||(e[87]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RT",-1)),s(a("input",{"onUpdate:modelValue":e[28]||(e[28]=t=>m.value.rt=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"000"},null,512),[[g,m.value.rt]])]),a("div",null,[e[88]||(e[88]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RW",-1)),s(a("input",{"onUpdate:modelValue":e[29]||(e[29]=t=>m.value.rw=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"000"},null,512),[[g,m.value.rw]])]),a("div",null,[e[89]||(e[89]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Lahir",-1)),s(a("input",{"onUpdate:modelValue":e[30]||(e[30]=t=>m.value.tanggalLahir=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"DD-MM-YYYY"},null,512),[[g,m.value.tanggalLahir]])]),a("div",null,[e[90]||(e[90]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tempat Lahir",-1)),s(a("input",{"onUpdate:modelValue":e[31]||(e[31]=t=>m.value.tempatLahir=t),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Kota kelahiran"},null,512),[[g,m.value.tempatLahir]])])])]),a("div",Ma,[a("div",{class:"flex justify-between items-center mb-6"},[e[93]||(e[93]=a("div",null,[a("h3",{class:"text-lg font-semibold text-gray-800 mb-1"},"Data Anak-anak"),a("p",{class:"text-sm text-gray-600"},"Tambahkan data anak sebagai ahli waris")],-1)),a("button",{onClick:Ue,class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2"},[...e[92]||(e[92]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),P(" Tambah Anak ",-1)])])]),(u(!0),d(R,null,W(z.value,(t,r)=>(u(),d("div",{key:r,class:"bg-gray-50 border border-gray-200 rounded-xl p-6 relative"},[z.value.length>1?(u(),d("button",{key:0,onClick:n=>Pe(r),class:"absolute top-4 right-4 text-red-400 hover:text-red-600 bg-red-50 hover:bg-red-100 w-8 h-8 rounded-full flex items-center justify-center transition-colors"},[...e[94]||(e[94]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Sa)):v("",!0),a("h4",Ba,"Anak ke-"+f(r+1),1),a("div",Da,[a("label",Oa,"Scan KTP Anak ke-"+f(r+1),1),a("input",{onChange:n=>he(n,r),accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 cursor-pointer border border-dashed border-blue-300 rounded-lg p-3",type:"file",disabled:x.value},null,40,Ia),t.ktpFileName?(u(),d("div",Ra,[a("p",Wa,"ðŸ†” KTP Anak ke-"+f(r+1)+" yang telah diupload:",1),y.value[`ktp_${t.ktpFileName}`]?(u(),d("div",$a,[a("img",{src:y.value[`ktp_${t.ktpFileName}`],alt:"KTP Anak",class:"w-full max-w-sm mx-auto rounded-lg shadow-sm border border-gray-200"},null,8,_a)])):(u(),d("div",Ea,[...e[95]||(e[95]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"},null,-1),a("p",{class:"text-xs text-purple-600 mt-2"},"Memuat gambar...",-1)])]))])):v("",!0),a("div",Ga,[e[97]||(e[97]=a("p",{class:"text-xs text-blue-600"},"ðŸ’¡ Upload KTP untuk mengisi data otomatis",-1)),x.value?(u(),d("div",za,[...e[96]||(e[96]=[a("div",{class:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"},null,-1),P(" Memproses OCR... ",-1)])])):v("",!0)]),a("p",Ja,f(t.ktpFile?"File: "+t.ktpFile.name:"Belum ada file yang dipilih"),1)]),a("div",Ha,[a("label",Ya,"Akta Kelahiran Anak ke-"+f(r+1)+" *",1),e[102]||(e[102]=a("p",{class:"text-xs text-red-600 mb-2"},"âš ï¸ Wajib: Upload akta kelahiran untuk setiap anak",-1)),a("input",{onChange:n=>Ke(n,r),accept:"image/*,.pdf",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-red-100 file:text-red-700 hover:file:bg-red-200 cursor-pointer border border-dashed border-red-300 rounded-lg p-3",type:"file",disabled:t.aktaUploading},null,40,qa),a("div",Za,[t.aktaUploading?(u(),d("div",Qa,[e[98]||(e[98]=a("div",{class:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"},null,-1)),a("span",null,"Mengunggah... "+f(t.aktaUploadProgress)+"%",1),a("div",Xa,[a("div",{class:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:q(`width: ${t.aktaUploadProgress}%`)},null,4)])])):t.aktaUploaded?(u(),d("div",et,[a("div",at,[e[99]||(e[99]=a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),a("span",null,"âœ… Akta kelahiran terupload: "+f(t.aktaKelahiranFile?.name),1)]),t.aktaFileName?(u(),d("div",tt,[a("p",lt,"ðŸ“„ Akta Kelahiran Anak ke-"+f(r+1)+":",1),y.value[`akta_${t.aktaFileName}`]?(u(),d("div",rt,[a("img",{src:y.value[`akta_${t.aktaFileName}`],alt:"Akta Kelahiran",class:"w-full max-w-sm mx-auto rounded-lg shadow-sm border border-gray-200"},null,8,nt)])):(u(),d("div",ot,[...e[100]||(e[100]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),a("p",{class:"text-xs text-blue-600 mt-2"},"Memuat gambar...",-1)])]))])):v("",!0)])):t.aktaKelahiranFile&&!t.aktaUploaded?(u(),d("div",st,[e[101]||(e[101]=a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),a("span",null,"âŒ Upload gagal: "+f(t.aktaKelahiranFile?.name),1)])):(u(),d("p",it,"Belum ada akta kelahiran yang dipilih"))])]),a("div",dt,[a("div",null,[e[103]||(e[103]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Lengkap *",-1)),s(a("input",{"onUpdate:modelValue":n=>t.nama=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama sesuai KTP"},null,8,ut),[[g,t.nama]])]),a("div",null,[e[104]||(e[104]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"NIK *",-1)),s(a("input",{"onUpdate:modelValue":n=>t.nik=n,type:"number",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"16 digit NIK"},null,8,gt),[[g,t.nik]])]),a("div",null,[e[106]||(e[106]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Hubungan *",-1)),s(a("select",{"onUpdate:modelValue":n=>t.hubungan=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[105]||(e[105]=[a("option",{disabled:"",value:""},"Pilih hubungan",-1),a("option",null,"Anak Kandung",-1),a("option",null,"Anak Tiri",-1),a("option",null,"Anak Angkat",-1),a("option",null,"Cucu",-1)])],8,mt),[[h,t.hubungan]])])]),a("div",pt,[a("div",null,[e[107]||(e[107]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alamat",-1)),s(a("input",{"onUpdate:modelValue":n=>t.alamat=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Alamat lengkap"},null,8,bt),[[g,t.alamat]])]),a("div",null,[e[108]||(e[108]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Meninggal",-1)),s(a("input",{"onUpdate:modelValue":n=>t.tanggalMeninggal=n,type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"},null,8,ct),[[g,t.tanggalMeninggal]]),e[109]||(e[109]=a("p",{class:"text-xs text-gray-500 mt-1"},"Kosongkan jika masih hidup",-1))])]),a("div",ft,[a("div",null,[e[110]||(e[110]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Agama",-1)),s(a("input",{"onUpdate:modelValue":n=>t.agama=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Agama"},null,8,kt),[[g,t.agama]])]),a("div",null,[e[112]||(e[112]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jenis Kelamin",-1)),s(a("select",{"onUpdate:modelValue":n=>t.jenisKelamin=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[111]||(e[111]=[a("option",{value:""},"Pilih jenis kelamin",-1),a("option",{value:"Laki-laki"},"Laki-laki",-1),a("option",{value:"Perempuan"},"Perempuan",-1)])],8,xt),[[h,t.jenisKelamin]])]),a("div",null,[e[114]||(e[114]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Golongan Darah",-1)),s(a("select",{"onUpdate:modelValue":n=>t.golonganDarah=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[113]||(e[113]=[A('<option value="" data-v-114cae8b>Pilih golongan darah</option><option value="A" data-v-114cae8b>A</option><option value="B" data-v-114cae8b>B</option><option value="AB" data-v-114cae8b>AB</option><option value="O" data-v-114cae8b>O</option>',5)])],8,vt),[[h,t.golonganDarah]])])]),a("div",yt,[a("div",null,[e[115]||(e[115]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pekerjaan",-1)),s(a("input",{"onUpdate:modelValue":n=>t.pekerjaan=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Profesi/pekerjaan"},null,8,wt),[[g,t.pekerjaan]])]),a("div",null,[e[116]||(e[116]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kecamatan",-1)),s(a("input",{"onUpdate:modelValue":n=>t.kecamatan=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama kecamatan"},null,8,ht),[[g,t.kecamatan]])]),a("div",null,[e[117]||(e[117]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kelurahan/Desa",-1)),s(a("input",{"onUpdate:modelValue":n=>t.kelurahanAtauDesa=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Kelurahan/desa"},null,8,Ut),[[g,t.kelurahanAtauDesa]])])]),a("div",Pt,[a("div",Ft,[a("div",null,[e[118]||(e[118]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kewarganegaraan",-1)),s(a("input",{"onUpdate:modelValue":n=>t.kewarganegaraan=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"WNI"},null,8,Lt),[[g,t.kewarganegaraan]])]),a("div",null,[e[120]||(e[120]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status Perkawinan",-1)),s(a("select",{"onUpdate:modelValue":n=>t.statusPerkawinan=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[119]||(e[119]=[A('<option value="" data-v-114cae8b>Pilih status</option><option value="Belum Kawin" data-v-114cae8b>Belum Kawin</option><option value="Kawin" data-v-114cae8b>Kawin</option><option value="Cerai Hidup" data-v-114cae8b>Cerai Hidup</option><option value="Cerai Mati" data-v-114cae8b>Cerai Mati</option>',5)])],8,jt),[[h,t.statusPerkawinan]])]),e[121]||(e[121]=a("div",null,null,-1))]),a("div",Kt,[a("div",null,[e[122]||(e[122]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RT",-1)),s(a("input",{"onUpdate:modelValue":n=>t.rt=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"000"},null,8,At),[[g,t.rt]])]),a("div",null,[e[123]||(e[123]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RW",-1)),s(a("input",{"onUpdate:modelValue":n=>t.rw=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"000"},null,8,Ct),[[g,t.rw]])]),a("div",null,[e[124]||(e[124]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Lahir",-1)),s(a("input",{"onUpdate:modelValue":n=>t.tanggalLahir=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"DD-MM-YYYY"},null,8,Nt),[[g,t.tanggalLahir]])]),a("div",null,[e[125]||(e[125]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tempat Lahir",-1)),s(a("input",{"onUpdate:modelValue":n=>t.tempatLahir=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Kota kelahiran"},null,8,Vt),[[g,t.tempatLahir]])])])])]))),128))])])):v("",!0),c.value===3?(u(),d("div",Tt,[a("div",{class:"border-b pb-3 mb-6"},[a("div",{class:"flex justify-between items-center"},[e[128]||(e[128]=a("div",null,[a("h2",{class:"text-xl font-bold text-gray-800 mb-1"},"Data Saksi"),a("p",{class:"text-sm text-gray-600"},"Tambahkan data saksi-saksi dalam pengajuan waris")],-1)),a("button",{onClick:Fe,class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2"},[...e[127]||(e[127]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),P(" Tambah Saksi ",-1)])])])]),(u(!0),d(R,null,W(o.saksiList,(t,r)=>(u(),d("div",{key:r,class:"bg-white border border-gray-200 rounded-xl p-6 relative"},[o.saksiList.length>1?(u(),d("button",{key:0,onClick:n=>Le(r),class:"absolute top-4 right-4 text-red-400 hover:text-red-600 bg-red-50 hover:bg-red-100 w-8 h-8 rounded-full flex items-center justify-center transition-colors"},[...e[129]||(e[129]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Mt)):v("",!0),a("h4",St,"Saksi ke-"+f(r+1),1),a("div",Bt,[a("label",Dt,"Scan KTP Saksi ke-"+f(r+1),1),a("input",{onChange:n=>Ce(n,r),accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 cursor-pointer border border-dashed border-blue-300 rounded-lg p-3",type:"file",disabled:x.value},null,40,Ot),a("div",It,[e[131]||(e[131]=a("p",{class:"text-xs text-blue-600"},"ðŸ’¡ Upload KTP untuk mengisi data otomatis",-1)),x.value?(u(),d("div",Rt,[...e[130]||(e[130]=[a("div",{class:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"},null,-1),P(" Memproses OCR... ",-1)])])):v("",!0)]),a("p",Wt,f(t.ktpFile?"File: "+t.ktpFile.name:"Belum ada file yang dipilih"),1)]),a("div",$t,[a("div",null,[e[132]||(e[132]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Lengkap *",-1)),s(a("input",{"onUpdate:modelValue":n=>t.nama=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama sesuai KTP"},null,8,_t),[[g,t.nama]])]),a("div",null,[e[133]||(e[133]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"NIK *",-1)),s(a("input",{"onUpdate:modelValue":n=>t.nik=n,type:"number",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"16 digit NIK"},null,8,Et),[[g,t.nik]])]),a("div",null,[e[135]||(e[135]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Hubungan dengan Pewaris",-1)),s(a("select",{"onUpdate:modelValue":n=>t.hubungan=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[134]||(e[134]=[a("option",{disabled:"",value:""},"Pilih hubungan",-1),a("option",null,"Tetangga",-1),a("option",null,"Teman",-1),a("option",null,"Kerabat",-1),a("option",null,"Rekan Kerja",-1),a("option",null,"Tokoh Masyarakat",-1),a("option",null,"Lainnya",-1)])],8,Gt),[[h,t.hubungan]])])]),a("div",zt,[a("div",null,[e[136]||(e[136]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alamat",-1)),s(a("input",{"onUpdate:modelValue":n=>t.alamat=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Alamat lengkap"},null,8,Jt),[[g,t.alamat]])]),a("div",null,[e[137]||(e[137]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pekerjaan",-1)),s(a("input",{"onUpdate:modelValue":n=>t.pekerjaan=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Profesi/pekerjaan"},null,8,Ht),[[g,t.pekerjaan]])])]),a("div",Yt,[a("div",null,[e[138]||(e[138]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Agama",-1)),s(a("input",{"onUpdate:modelValue":n=>t.agama=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Agama"},null,8,qt),[[g,t.agama]])]),a("div",null,[e[140]||(e[140]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jenis Kelamin",-1)),s(a("select",{"onUpdate:modelValue":n=>t.jenisKelamin=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors bg-white"},[...e[139]||(e[139]=[a("option",{value:""},"Pilih jenis kelamin",-1),a("option",{value:"Laki-laki"},"Laki-laki",-1),a("option",{value:"Perempuan"},"Perempuan",-1)])],8,Zt),[[h,t.jenisKelamin]])]),a("div",null,[e[141]||(e[141]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tempat Lahir",-1)),s(a("input",{"onUpdate:modelValue":n=>t.tempatLahir=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Kota kelahiran"},null,8,Qt),[[g,t.tempatLahir]])])]),a("div",Xt,[a("div",null,[e[142]||(e[142]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kecamatan",-1)),s(a("input",{"onUpdate:modelValue":n=>t.kecamatan=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Nama kecamatan"},null,8,el),[[g,t.kecamatan]])]),a("div",null,[e[143]||(e[143]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kelurahan/Desa",-1)),s(a("input",{"onUpdate:modelValue":n=>t.kelurahanAtauDesa=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Kelurahan/desa"},null,8,al),[[g,t.kelurahanAtauDesa]])]),a("div",null,[e[144]||(e[144]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RT",-1)),s(a("input",{"onUpdate:modelValue":n=>t.rt=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"000"},null,8,tl),[[g,t.rt]])]),a("div",null,[e[145]||(e[145]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"RW",-1)),s(a("input",{"onUpdate:modelValue":n=>t.rw=n,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"000"},null,8,ll),[[g,t.rw]])])])]))),128))])):v("",!0),c.value===4?(u(),d("div",rl,[e[155]||(e[155]=a("div",{class:"border-b pb-3 mb-6"},[a("h2",{class:"text-xl font-bold text-gray-800 mb-1"},"Dokumen Pendukung"),a("p",{class:"text-sm text-gray-600"},"Upload dokumen-dokumen yang diperlukan untuk pengajuan waris")],-1)),a("div",nl,[a("div",{class:"flex items-center justify-between mb-4"},[e[147]||(e[147]=a("div",null,[a("h3",{class:"text-sm font-semibold text-gray-800"},"Dokumen Pendukung"),a("p",{class:"text-xs text-gray-600"},"Upload dokumen yang diperlukan untuk pengajuan waris")],-1)),a("button",{onClick:je,type:"button",class:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors"},[...e[146]||(e[146]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),P(" Tambah Dokumen ",-1)])])]),o.dokumenPendukung.length===0?(u(),d("div",ol,[...e[148]||(e[148]=[a("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),a("p",{class:"text-sm"},"Belum ada dokumen",-1),a("p",{class:"text-xs mt-1"},'Klik "Tambah Dokumen" untuk menambah dokumen pendukung',-1)])])):(u(),d("div",sl,[(u(!0),d(R,null,W(o.dokumenPendukung,(t,r)=>(u(),d("div",{key:r,class:"bg-white border border-gray-200 rounded-lg p-4"},[a("div",il,[e[150]||(e[150]=a("div",{class:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center"},[a("svg",{class:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),a("div",dl,[s(a("input",{"onUpdate:modelValue":n=>t.nama=n,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors text-sm",placeholder:"Nama dokumen (contoh: Surat Nikah, Akta Tanah, dll)"},null,8,ul),[[g,t.nama]])]),a("button",{onClick:n=>l.removeCustomDocument(r),type:"button",class:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors"},[...e[149]||(e[149]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,gl)]),a("input",{onChange:n=>Ae(n,r),type:"file",accept:"image/*,.pdf",disabled:t.uploading,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-3 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100 cursor-pointer border border-dashed border-gray-300 rounded-lg p-3"},null,40,ml),a("div",pl,[t.uploading?(u(),d("div",bl,[e[151]||(e[151]=a("div",{class:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"},null,-1)),a("span",null,"Mengunggah... "+f(t.uploadProgress)+"%",1),a("div",cl,[a("div",{class:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:q(`width: ${t.uploadProgress}%`)},null,4)])])):t.uploaded?(u(),d("div",fl,[a("div",kl,[e[152]||(e[152]=a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),a("span",null,"Upload berhasil: "+f(t.file?.name),1)]),t.fileName?(u(),d("div",xl,[a("p",vl,"ðŸ“„ "+f(t.nama||"Dokumen")+":",1),y.value[`documents_${t.fileName}`]?(u(),d("div",yl,[a("img",{src:y.value[`documents_${t.fileName}`],alt:t.nama||"Dokumen",class:"w-full max-w-sm mx-auto rounded-lg shadow-sm border border-gray-200"},null,8,wl)])):(u(),d("div",hl,[...e[153]||(e[153]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"},null,-1),a("p",{class:"text-xs text-orange-600 mt-2"},"Memuat gambar...",-1)])]))])):v("",!0)])):t.file&&!t.uploaded?(u(),d("div",Ul,[e[154]||(e[154]=a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),a("span",null,"Upload gagal: "+f(t.file?.name),1)])):(u(),d("p",Pl,"Belum ada file yang dipilih"))])]))),128))]))])])):v("",!0),a("div",Fl,[c.value>1?(u(),d("button",{key:0,onClick:Se,class:"flex items-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},[...e[156]||(e[156]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),P(" Kembali ",-1)])])):(u(),d("div",Ll)),c.value<4?(u(),d("button",{key:2,onClick:Me,class:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition-colors font-medium"},[...e[157]||(e[157]=[P(" Lanjut ",-1),a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):(u(),d("button",{key:3,onClick:Be,class:"flex items-center gap-2 px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg transition-colors font-medium"},[...e[158]||(e[158]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1),P(" Kirim Permohonan ",-1)])]))])])])):(u(),d("div",He,[e[33]||(e[33]=A('<h1 class="text-2xl font-bold text-gray-800 mb-6" data-v-114cae8b>Persetujuan Pengajuan Waris</h1><div class="mb-8" data-v-114cae8b><p class="text-gray-700 mb-4" data-v-114cae8b> Sebelum melanjutkan pengajuan, Anda harus menyetujui syarat dan ketentuan berikut: </p><div class="bg-gray-50 p-6 rounded-lg text-left max-w-2xl mx-auto" data-v-114cae8b><p class="text-sm text-gray-600 leading-relaxed" data-v-114cae8b> Saya bersedia mengikuti proses pengajuan waris dengan benar dan bertanggung jawab. Saya menyatakan bahwa semua data yang saya berikan adalah benar dan sesuai dengan dokumen asli. Saya memahami bahwa pengajuan ini akan diproses sesuai dengan peraturan yang berlaku di Kelurahan Lenteng Agung. </p></div></div>',2)),a("button",{onClick:De,class:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 shadow-lg font-medium"}," Saya Bersedia Mengikuti Proses Pengajuan ")]))]))}},Cl=We(jl,[["__scopeId","data-v-114cae8b"]]);export{Cl as default};
