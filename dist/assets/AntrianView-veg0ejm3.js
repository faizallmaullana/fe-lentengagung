import{r as g,p,s as k,c as l,a as e,F as h,y,k as C,b as D,z as j,d as M,t as o,e as A,f as B,g as P,A as V,m as R,o as r,n as u}from"./index-SbiDxUwW.js";const z={class:"space-y-8"},S={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},L={class:"text-4xl font-bold text-gray-800 mb-1"},I={class:"text-sm font-medium text-gray-500"},N={class:"w-full bg-gray-100 h-1.5 rounded-full mt-4"},T={class:"relative w-full h-48 rounded-2xl overflow-hidden shadow-sm group"},H={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},$={class:"p-6 border-b border-gray-100 flex justify-between items-center"},E={class:"text-sm text-gray-500"},F={key:0},K={key:1},G={class:"relative"},Q=["disabled"],U={class:"w-full text-left text-sm text-gray-600"},q={class:"divide-y divide-gray-50"},J={key:0},O={key:1},W={colspan:"6",class:"px-6 py-8 text-center text-gray-500"},X={class:"flex flex-col items-center gap-2"},Y={class:"px-6 py-4 font-medium text-gray-900"},Z={class:"px-6 py-4"},ee={class:"px-6 py-4 text-gray-600"},te={class:"px-6 py-4"},se={class:"px-6 py-4 text-center"},ae={class:"px-6 py-4 text-right"},le=["onClick"],oe={key:0,class:"p-4 border-t border-gray-100 bg-gray-50 text-center text-xs text-gray-500"},re={key:0},ne={key:1},ue={__name:"AntrianView",setup(ie){const v=R(),d=g(!0),n=g([]),i=g(""),m=p(()=>[{label:"Permohonan Baru",count:n.value.filter(t=>t.status==="Pending"||t.status==="Submitted").length,color:"text-yellow-600",bg:"bg-yellow-50",bar:"bg-yellow-500"},{label:"Permohonan Berjalan",count:n.value.filter(t=>t.status==="Review"||t.status==="InProcess").length,color:"text-blue-600",bg:"bg-blue-50",bar:"bg-blue-500"},{label:"Dalam Perbaikan",count:n.value.filter(t=>t.status==="Revision"||t.status==="Rejected").length,color:"text-red-600",bg:"bg-red-50",bar:"bg-red-500"}]),c=p(()=>i.value?n.value.filter(t=>t.profile_name?.toLowerCase().includes(i.value.toLowerCase())||t.id?.toLowerCase().includes(i.value.toLowerCase())):n.value),f=async()=>{try{d.value=!0;const t=await V("/form/list");n.value=t||[]}catch(t){console.error("Error fetching applications:",t)}finally{d.value=!1}},w=t=>t?new Date(t).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",x=t=>({Pending:{text:"Diajukan",class:"bg-yellow-100 text-yellow-700"},Submitted:{text:"Diajukan",class:"bg-yellow-100 text-yellow-700"},Review:{text:"Ditinjau",class:"bg-blue-100 text-blue-700"},InProcess:{text:"Diproses",class:"bg-blue-100 text-blue-700"},Revision:{text:"Revisi",class:"bg-red-100 text-red-700"},Rejected:{text:"Ditolak",class:"bg-red-100 text-red-700"},Approved:{text:"Disetujui",class:"bg-green-100 text-green-700"},Completed:{text:"Selesai",class:"bg-green-100 text-green-700"}})[t]||{text:t,class:"bg-gray-100 text-gray-700"},_=t=>{v.push(`/admin/verifikasi/${t}`)};return k(()=>{f()}),(t,s)=>(r(),l("div",z,[s[8]||(s[8]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Dashboard Petugas",-1)),e("div",S,[(r(!0),l(h,null,y(m.value,(a,b)=>(r(),l("div",{key:b,class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex flex-col justify-between h-32 relative overflow-hidden"},[e("div",null,[e("h3",L,o(a.count),1),e("p",I,o(a.label),1)]),e("div",N,[e("div",{class:u(["h-1.5 rounded-full",a.bar]),style:{width:"70%"}},null,2)]),e("div",{class:u(["absolute right-4 top-4 w-10 h-10 rounded-full flex items-center justify-center opacity-20",a.bg])},[e("div",{class:u(["w-4 h-4 rounded-full",a.bar])},null,2)],2)]))),128))]),e("div",T,[e("div",{class:"absolute inset-0 bg-cover bg-center",style:C({backgroundImage:`url(${D(j)})`})},null,4),s[1]||(s[1]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-slate-900/80 to-slate-900/20"},null,-1)),s[2]||(s[2]=e("div",{class:"relative z-10 h-full flex flex-col justify-center px-8 text-white"},[e("h1",{class:"text-3xl font-bold mb-2"},"Antrian Verifikasi"),e("p",{class:"text-lg opacity-90"},"Segera proses permohonan yang masuk untuk pelayanan prima.")],-1))]),e("div",H,[e("div",$,[e("div",null,[s[3]||(s[3]=e("h3",{class:"text-lg font-bold text-gray-800"},"Daftar Permohonan",-1)),e("p",E,[d.value?(r(),l("span",F,"Memuat data...")):(r(),l("span",K,"Total "+o(n.value.length)+" permohonan",1))])]),e("div",G,[A(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a),type:"text",placeholder:"Cari nama pemohon atau kode...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-500 w-64 transition-all",disabled:d.value},null,8,Q),[[B,i.value]]),s[4]||(s[4]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 text-gray-400 absolute left-3 top-3"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1))])]),e("table",U,[s[7]||(s[7]=e("thead",{class:"bg-gray-50 text-gray-500 font-semibold uppercase tracking-wider text-xs border-b border-gray-100"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Kode Registrasi"),e("th",{class:"px-6 py-4"},"Nama Pemohon"),e("th",{class:"px-6 py-4"},"NIK"),e("th",{class:"px-6 py-4"},"Tanggal Masuk"),e("th",{class:"px-6 py-4 text-center"},"Status"),e("th",{class:"px-6 py-4 text-right"},"Aksi")])],-1)),e("tbody",q,[d.value?(r(),l("tr",J,[...s[5]||(s[5]=[e("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-500"},[e("div",{class:"flex justify-center items-center gap-2"},[e("svg",{class:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),P(" Memuat data... ")])],-1)])])):c.value.length===0?(r(),l("tr",O,[e("td",W,[e("div",X,[s[6]||(s[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-8 h-8 text-gray-400"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1)),e("span",null,o(i.value?"Tidak ada data yang sesuai pencarian":"Belum ada permohonan"),1)])])])):(r(!0),l(h,{key:2},y(c.value,a=>(r(),l("tr",{key:a.id,class:"hover:bg-blue-50/30 transition-colors"},[e("td",Y,o(a.id||"-"),1),e("td",Z,o(a.profile_name||a.user_email||"-"),1),e("td",ee,o(a.profile_nik||"-"),1),e("td",te,o(w(a.timestamp)),1),e("td",se,[e("span",{class:u(["px-3 py-1 rounded-full text-xs font-semibold inline-block",x(a.status).class])},o(x(a.status).text),3)]),e("td",ae,[e("button",{onClick:b=>_(a.id),class:"text-blue-600 hover:text-blue-800 font-medium text-xs border border-blue-200 hover:bg-blue-50 px-3 py-1.5 rounded transition-all"}," Verifikasi ",8,le)])]))),128))])]),d.value?M("",!0):(r(),l("div",oe,[i.value?(r(),l("span",re," Menampilkan "+o(c.value.length)+" dari "+o(n.value.length)+" data ",1)):(r(),l("span",ne," Menampilkan "+o(n.value.length)+" data ",1))]))])]))}};export{ue as default};
